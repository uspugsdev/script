-- Aguarda PlayerGui e personagem
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HRP = Character:WaitForChild("HumanoidRootPart")

-- Interface corrigida
local gui = Instance.new("ScreenGui", PlayerGui)
gui.Name = "PainelFix"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 250, 0, 450)
frame.Position = UDim2.new(0, 20, 0.5, -225)
frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

local layout = Instance.new("UIListLayout", frame)
layout.Padding = UDim.new(0, 6)
layout.SortOrder = Enum.SortOrder.LayoutOrder

-- Função para botão
local function criarBotao(nome, acao)
    local btn = Instance.new("TextButton", frame)
    btn.Size = UDim2.new(1, -10, 0, 36)
    btn.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 16
    btn.Text = nome
    btn.MouseButton1Click:Connect(acao)
end

-- Exemplo de botões
criarBotao("✅ Painel Funcionando", function()
    print("Botão clicado!")
end)

criarBotao("Speed Boost", function()
    local hum = Character:FindFirstChildWhichIsA("Humanoid")
    if hum then hum.WalkSpeed = hum.WalkSpeed == 16 and 32 or 16 end
end)

criarBotao("Fly com WASD", function()
    local flying = true
    RunService.RenderStepped:Connect(function()
        if flying and HRP then
            local dir = Vector3.zero
            local cam = workspace.CurrentCamera
            local UIS = game:GetService("UserInputService")
            if UIS:IsKeyDown(Enum.KeyCode.W) then dir += cam.CFrame.LookVector end
            if UIS:IsKeyDown(Enum.KeyCode.S) then dir -= cam.CFrame.LookVector end
            if UIS:IsKeyDown(Enum.KeyCode.A) then dir -= cam.CFrame.RightVector end
            if UIS:IsKeyDown(Enum.KeyCode.D) then dir += cam.CFrame.RightVector end
            HRP.Velocity = dir.Magnitude > 0 and dir.Unit * 50 or Vector3.zero
        end
    end)
end)
